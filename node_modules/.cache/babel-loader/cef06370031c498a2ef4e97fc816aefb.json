{"ast":null,"code":"var _jsxFileName = \"/home/mukeshs/Projects/edurights/client/src/components/express/deepExpress/middleware.js\";\nimport React, { Component } from 'react';\nimport Prism from \"prismjs\";\nimport { Grid, Paper, withStyles, List } from \"@material-ui/core\";\nimport '../../ReactJs/styles.css';\nimport Sidebar from '../sidebar';\nimport PrismCode from '../../ReactJs/prismCode';\nconst titles = {\n  backgroundColor: '#F0F8FF',\n  padding: '1px',\n  fontSize: '16px'\n};\n\nconst styles = theme => ({\n  paper: {\n    margin: theme.spacing(1),\n    padding: theme.spacing(1)\n  },\n  smMargin: {\n    margin: theme.spacing(1)\n  },\n  actionDiv: {\n    textAlign: \"center\"\n  }\n});\n\nconst middleware = `var app = express();\n// middleware\n  var stack = middleware();\n  \nThen you can add layers to the middleware stack by calling .use\n  app.use(express.static(..));\n  \n// middleware\n  stack.use(function(data, next) {\n   next();\n  });\n`.trim();\nconst middleware_2 = `var middleware = require(\"../src/middleware.js\");\nvar stack = middleware((data, next) => {\n   data.foo = data.data*2;\n   next();\n  }, \n  \n  function(data, next) {\n     setTimeout(() => {\n     data.async = true;\n     next();\n     }, 100)\n    }, \n    \n  function(data) {\n     console.log(data);\n    });\n    \n  stack.handle({\n   \"data\": 42\n  })`.trim();\nconst middleware_3 = `var stack = middleware((req, res, next) => {\n  users.getAll((err, users) => {\n    if (err) next(err);\n    req.users = users;\n    next();\n    });\n }, \n \n function(req, res, next) {\n    posts.getAll((err, posts) => {\n      if (err) next(err);\n        req.posts = posts;\n        next();\n    })\n }, \n \n function(req, res, next) {\n        req.posts.forEach((post) => {\n        post.user = req.users[post.userId];\n      });\n        res.render(\"blog/posts\", {\n        \"posts\": req.posts\n        });\n   });\n   \n   var app = express.createServer();\n   app.get(\"/posts\", function(req, res) {\n   stack.handle(req, res);\n });\n \n \n // express\n var app = express.createServer();\n app.get(\"/posts\", [\n    function(req, res, next) {\n      users.getAll(function(err, users) {\n        if (err) next(err);\n        req.users = users;\n        next();\n  });\n}, \n\nfunction(req, res, next) {\n  posts.getAll((err, posts) => {\n      if (err) next(err);\n      req.posts = posts;\n      next();\n    })\n  }, \n  \n  function(req, res, next) {\n      req.posts.forEach((post) => {\n      post.user = req.users[post.userId];\n    });\n      res.render(\"blog/posts\", {\n      \"posts\": req.posts\n    });\n  }\n ], \n \n function(req, res) {\n     stack.handle(req, res);\n });`.trim();\nconst Mustache = `var Mustache = require(\"mustache\");\nvar result = Mustache.render(\"Hi, {{first}} {{last}}!\", {\n   first: \"Nicolas\",\n   last: \"Cage\" });\n  console.log(result);\n`.trim();\nconst encoding = `var fs = require(\"fs\");\nvar options = { encoding: \"utf-8\" };\n fs.readFile(\"myfile.txt\", options, function(err, data) {\n   if (err) {\n     console.error(\"Error reading file!\");\n     return;\n   }\n     console.log(data.match(/x/gi).length + \" letter X's\");\n });\n \nvar fs = require(\"fs\");\nvra options = { encoding: \"utf-8\" };\nfs.readFile(\"myfile.txt\", options, function(err, data) { // ...});\nconsole.log(\"Hello world!\");`.trim();\nconst encoding_2 = `var express = require(\"express\");\nvar http = require(\"http\");\nvar app = express();\n\napp.use((request, response, next) => {\n   console.log(\"In comes a \" + request.method + \" to \" + request.url);\n   next();});\n   \n   app.use((request, response) => {\n     response.writeHead(200, { \"Content-Type\": \"text/plain\" });\n     response.end(\"Hello, world!\");\n   });\n   \nhttp.createServer(app).listen(3000);`.trim();\nconst authentication = `app.use((request, response, next) => {\n  console.log(\"In comes a \" + request.method + \" to \" + request.url);\n  next();});\n  \n app.use((request, response, next) => {\n    var minute = (new Date()).getMinutes();\n        if ((minute % 2) === 0) {\n        next();\n      } \n        else {\n        response.statusCode = 403;\n        response.end(\"Not authorized.\");\n    }});\n    \n    app.use((request, response) => {\n    response.end('Secret info: the password is \"swordfish\"!');\n  });`.trim();\nconst logger = `\nvar express = require(\"express\");\nvar logger = require(\"morgan\");\nvar http = require(\"http\");\nvar app = express();\napp.use(logger(\"short\"));\n\napp.use((request, response) => {\n    response.writeHead(200, { \"Content-Type\": \"text/plain\" });\n    response.end(\"Hello, world!\");\n  });\n  \nhttp.createServer(app).listen(3000);\n\n\nEXPRESS S STATIC MIDDLEWARE\nvar express = require(\"express\");\nvar path = require(\"path\");\nvar http = require(\"http\");\nvar app = express();\nvar publicPath = path.resolve(__dirname, \"public\");\n\napp.use(express.static(publicPath));\n\napp.use((request, response) => {\n     response.writeHead(200, { \"Content-Type\": \"text/plain\" });\n     response.end(\"Looks like you didn't find a static file.\");\n  });\n  \nhttp.createServer(app).listen(3000);`.trim();\nconst userid = `value, you’ll look inside the params property of the request.\n  app.get(\"/users/:userid\", function(req, res) {\n  var userId = parseInt(req.params.userid, 10);\n   // ...\n   });`.trim();\nconst params = `app.get(/^\\/users\\/(\\d+)$/, function(req, res) {\n  var userId = parseInt(req.params[0], 10);\n  // ...\n  });\n `.trim();\nconst horribleRegexp = `var horribleRegexp = /^([0-9a-f]{8}-[0-9a-f]{4}-➥ 4[0-9a-f]{3}-[89ab][0-9af]{3}-[0-9a-f]{12})$/i;\n    app.get(horribleRegexp, function(req, res) {\n     var uuid = req.params[0];\n     // ...\n});\n`.trim();\nconst EVIL_IP = `var express = require(\"express\");\nvar app = express();\nvar EVIL_IP = \"123.45.67.89\";\n\napp.use((request, response, next) => {\n     if (request.ip === EVIL_IP) {\n     response.status(401).send(\"Not allowed!\");\n   } \n   else {\n     next();\n }});\n \n // ... the rest of your app ...\n`.trim();\nconst publicPath = `var publicPath = path.resolve(__dirname, \"public\");\nvar userUploadsPath = path.resolve(__dirname, \"user_uploads\");\napp.use(express.static(publicPath));\napp.use(express.static(userUploadsPath));\n`.trim();\nconst uploads = `app.use(\"/public\", express.static(publicPath));\napp.use(\"/uploads\", express.static(userUploadsPath));`.trim();\nconst staticFiles = `var express = require(\"express\");\nvar path = require(\"path\");\nvar http = require(\"http\");\nvar app = express();\n\n//Sets up the public path, using Node’s path module\nvar publicPath = path.resolve(__dirname, \"public\");\n\n//Sends static files from the publicPath directory\napp.use(express.static(publicPath));\n\napp.use((request, response) => {\n     response.writeHead(200, { \"Content-Type\": \"text/plain\" });\n     response.end(\"Looks like you didn't find a static file.\");\n   });\n   \nhttp.createServer(app).listen(4000);\n`.trim();\nconst scaffold = `var express = require('express');\nvar app = express();\n\napp.get('/', function (req, res) {\n   res.send('Welcome to JavaTpoint!');\n});\n\napp.listen(8000, function () {\n   console.log('Example app listening on port 8000!');\n}); `.trim();\nconst cookies = `\nvar express = require('express');\nvar cookieParser = require('cookie-parser');\nvar app = express();\n\napp.use(cookieParser());\napp.get('/cookieset', (req, res) => {\n   res.cookie('cookie_name', 'cookie_value');\n   res.cookie('company', 'javatpoint');\n   res.cookie('name', 'sonoo');\n   res.status(200).send('Cookie is set');\n});\n\napp.get('/cookieget', (req, res) => {\n   res.status(200).send(req.cookies);\n});\n\napp.get('/', (req, res) => {\n   res.status(200).send('Welcome to JavaTpoint!');\n});\n\n var server = app.listen(8000, () => {\n var host = server.address().address;\n var port = server.address().port;\n console.log('Example app listening at http://%s:%s', host, port);\n});`.trim();\n\nclass Middleware extends Component {\n  componentDidMount() {\n    setTimeout(() => Prism.highlightAll(), 0);\n  }\n\n  render() {\n    const {\n      classes\n    } = this.props;\n    return React.createElement(Grid, {\n      container: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      xs: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, React.createElement(Paper, {\n      className: classes.paper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, React.createElement(Sidebar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    })))), React.createElement(Grid, {\n      item: true,\n      xs: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }, React.createElement(Paper, {\n      className: classes.paper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, React.createElement(List, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }, \"How Middleware works? Where Middleware fits in API?\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    }, \"Middleware allows you to define a stack of actions that you should flow through. Express servers themselves are a stack of middlewares.\"), React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: middleware,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, \"A layer in the middleware stack is a function, which takes n parameters (req & res) and a next function. Middleware expects the layer to do some computation, augment the parameters and then call next. A stack doesn't do anything unless you handle it. Express will handle the stack every time an incoming HTTP request is caught on the server. With middleware you handle the stack manually. // express, you need to do nothing middleware stack.handle(someData);\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }, \"more complex example :\"), React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: middleware_2,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    })), React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }, \"In express terms you just define a stack of operations you want express to handle for every incoming HTTP request. In terms of express (rather than connect) you have global middleware and route specific middleware. This means you can attach a middleware stack to every incoming HTTP requests or only attach it to HTTP requests that interact with a certain route.\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    }, \"Advanced examples of express & middleware \"), React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: middleware_3,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364\n      },\n      __self: this\n    })), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370\n      },\n      __self: this\n    }, \"What Express is used for\"), \"Express could be used to build any web application. It can process incoming requests and respond to them @ Middleware which is a way to break your app into smaller bits of behavior.Generally, middleware is called one by one, in a sequence. @Routing similarly breaks your app up into smaller functions that are executed when the user visits a particular resource. @Routers can further break up large applications into smaller, composable sub applications.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: Mustache,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381\n      },\n      __self: this\n    })), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387\n      },\n      __self: this\n    }, \"The two most common external resources you\\u2019ll deal with in Express are\"), \"\\uF0B7 1.Anything involving the filesystem\\u2014Like reading and writing files from your harddrive\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388\n      },\n      __self: this\n    }), \"\\uF0B7 2.Anything involving a network\\u2014Like receiving requests, sending responses, or sending your own requests over the internet.\", React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: encoding,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400\n      },\n      __self: this\n    }, \"middleware\"), React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: encoding_2,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410\n      },\n      __self: this\n    }, \"middleware can also change the request or response objects Adding fake authentication middleware\"), React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: authentication,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421\n      },\n      __self: this\n    }, \"Third-party middleware libraries MORGAN LOGGING MIDDLEWARE\"), React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 423\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: logger,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 424\n      },\n      __self: this\n    })), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430\n      },\n      __self: this\n    }, \"Routing\"), \"Routing is a mapping of an HTTP verb (like GET or POST) and a URI (like/users/123). Routing is a way to map requests to specific handlers depending on their URL and HTTP verb. Simple and pattern-matching routing Using middleware with routing Serving static files with express.static, Express\\u2019s built-in static file middleware Using Express with Node\\u2019s built-in HTTPS module. One of Express\\u2019s big features, allowing you to map different requests to different request handler. The features of routing The simplest way to grab a parameter is by putting it in your route with a colon infront of it. To grab the\", React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 439\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: userid,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446\n      },\n      __self: this\n    }, \"Using regular expressions to match routes. This gives you more control over the routes you specify. You can also use regular expressions to match parameters. Let\\u2019s imagine that you want to match things like /users/123 or /users/456 but not/users/olivia. You can code this into a regular expression and grab the number toboot.\"), React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: params,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451\n      },\n      __self: this\n    })), React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457\n      },\n      __self: this\n    }, \"This is one way to enforce the \\u201Cthe user ID must be an integer\\u201D constraint. it\\u2019s passed in as a string, so you have to convert it to a number.\"), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 459\n      },\n      __self: this\n    }, \"@UUID-matching routes with a regexp\"), React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: horribleRegexp,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461\n      },\n      __self: this\n    })), React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467\n      },\n      __self: this\n    }, \"Extending request and response\"), \"Express augments the request and response objects that you\\u2019re passed in every request handler. One nicety Express offers is the redirect method.\", React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 471\n      },\n      __self: this\n    }, \" Using redirect:\"), \"response.redirect(\\\"/hello/world\\\"); response.redirect(\\\"http://expressjs.com\\\");\", React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474\n      },\n      __self: this\n    }, \"sendFile\"), \"response.sendFile(\\\"/path/to/cool_song.mp3\\\");\", React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476\n      },\n      __self: this\n    }, \"Let\\u2019s use some of these things to build middleware that blocks an evil IP address.\"), React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: EVIL_IP,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478\n      },\n      __self: this\n    })), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484\n      },\n      __self: this\n    }, \"Mounting static file middleware\"), \"var photoPath = path.resolve(__dirname, \\\"offensive-photos-folder\\\"); app.use(\\\"/offensive\\\", express.static(photoPath));\", React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487\n      },\n      __self: this\n    }, \"ROUTING WITH MULTIPLE STATIC FILE DIRECTORIES\"), \"I frequently find myself with static files in multiple directories. For example, I sometimes have static files in a folder called public and another in a folder called user_uploads.How can you do this with Express? Express solves this problem with the built-in middleware feature, and becaus eexpress.static is middleware, you can just apply it multiple times.\", React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: publicPath,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494\n      },\n      __self: this\n    })), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 500\n      },\n      __self: this\n    }, \".Now, let\\u2019s imagine four scenarios and see how this code deals with them\"), \"1.The user requests a resource that isn\\u2019t in the public folder or the user_uploads folder. Both static middleware functions will continue on to the next routes and middleware.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 502\n      },\n      __self: this\n    }), \"2.The user requests a resource that\\u2019s in the public folder. The first middleware will send the file and no following routes or middleware functions will be called.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 504\n      },\n      __self: this\n    }), \"3.The user requests a resource that\\u2019s in the user_uploads folder but not the public folder.The first middleware will continue on (it\\u2019s not in public), so the second middle-ware will pick it up. After that, no other middleware or route will be called.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 509\n      },\n      __self: this\n    }), \"4.The user requests a resource that\\u2019s in both the public folder and the user_uploads folder.Because the public-serving middleware is first, users will get the file in public and users will never be able to reach the matching file in the user_uploads folder.\", React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 515\n      },\n      __self: this\n    }, \"Serving static files from multiple directories without conflict\"), React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: uploads,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 517\n      },\n      __self: this\n    })), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 523\n      },\n      __self: this\n    }, \"static Files\"), React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 524\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: staticFiles,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 525\n      },\n      __self: this\n    })), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 531\n      },\n      __self: this\n    }, \"Scaffold\"), \"npm install express-scaffold After this step, execute the following command to install express generator: npm install -g express-generator Now, you can use express to scaffold a web-app.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 536\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 537\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: scaffold,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 538\n      },\n      __self: this\n    })), React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 544\n      },\n      __self: this\n    }, \"Open Node.js command prompt, go to myapp and run npm init command Fill the entries and press enter. It will create a package.json file in myapp folder and the data is shown in JSON format.\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 547\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 548\n      },\n      __self: this\n    }), React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 550\n      },\n      __self: this\n    }, \"Cookies\"), React.createElement(\"div\", {\n      style: titles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 551\n      },\n      __self: this\n    }, React.createElement(PrismCode, {\n      code: cookies,\n      language: \"js\",\n      plugins: [\"line-numbers\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 552\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nexport default withStyles(styles)(Middleware);","map":{"version":3,"sources":["/home/mukeshs/Projects/edurights/client/src/components/express/deepExpress/middleware.js"],"names":["React","Component","Prism","Grid","Paper","withStyles","List","Sidebar","PrismCode","titles","backgroundColor","padding","fontSize","styles","theme","paper","margin","spacing","smMargin","actionDiv","textAlign","middleware","trim","middleware_2","middleware_3","Mustache","encoding","encoding_2","authentication","logger","userid","params","horribleRegexp","EVIL_IP","publicPath","uploads","staticFiles","scaffold","cookies","Middleware","componentDidMount","setTimeout","highlightAll","render","classes","props"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Prism from \"prismjs\"\nimport { Grid, Paper, withStyles, List } from \"@material-ui/core\";\n\nimport '../../ReactJs/styles.css'\nimport Sidebar from '../sidebar';\nimport PrismCode from '../../ReactJs/prismCode';\n\n\nconst titles = { backgroundColor: '#F0F8FF', padding: '1px', fontSize: '16px' }\n\nconst styles = theme => ({\n  paper: {\n    margin: theme.spacing(1),\n    padding: theme.spacing(1)\n  },\n  smMargin: {\n    margin: theme.spacing(1)\n  },\n  actionDiv: {\n    textAlign: \"center\"\n  }\n})\n\nconst middleware = `var app = express();\n// middleware\n  var stack = middleware();\n  \nThen you can add layers to the middleware stack by calling .use\n  app.use(express.static(..));\n  \n// middleware\n  stack.use(function(data, next) {\n   next();\n  });\n`.trim()\n\nconst middleware_2 = `var middleware = require(\"../src/middleware.js\");\nvar stack = middleware((data, next) => {\n   data.foo = data.data*2;\n   next();\n  }, \n  \n  function(data, next) {\n     setTimeout(() => {\n     data.async = true;\n     next();\n     }, 100)\n    }, \n    \n  function(data) {\n     console.log(data);\n    });\n    \n  stack.handle({\n   \"data\": 42\n  })`.trim()\n\nconst middleware_3 = `var stack = middleware((req, res, next) => {\n  users.getAll((err, users) => {\n    if (err) next(err);\n    req.users = users;\n    next();\n    });\n }, \n \n function(req, res, next) {\n    posts.getAll((err, posts) => {\n      if (err) next(err);\n        req.posts = posts;\n        next();\n    })\n }, \n \n function(req, res, next) {\n        req.posts.forEach((post) => {\n        post.user = req.users[post.userId];\n      });\n        res.render(\"blog/posts\", {\n        \"posts\": req.posts\n        });\n   });\n   \n   var app = express.createServer();\n   app.get(\"/posts\", function(req, res) {\n   stack.handle(req, res);\n });\n \n \n // express\n var app = express.createServer();\n app.get(\"/posts\", [\n    function(req, res, next) {\n      users.getAll(function(err, users) {\n        if (err) next(err);\n        req.users = users;\n        next();\n  });\n}, \n\nfunction(req, res, next) {\n  posts.getAll((err, posts) => {\n      if (err) next(err);\n      req.posts = posts;\n      next();\n    })\n  }, \n  \n  function(req, res, next) {\n      req.posts.forEach((post) => {\n      post.user = req.users[post.userId];\n    });\n      res.render(\"blog/posts\", {\n      \"posts\": req.posts\n    });\n  }\n ], \n \n function(req, res) {\n     stack.handle(req, res);\n });`.trim()\n\nconst Mustache = `var Mustache = require(\"mustache\");\nvar result = Mustache.render(\"Hi, {{first}} {{last}}!\", {\n   first: \"Nicolas\",\n   last: \"Cage\" });\n  console.log(result);\n`.trim()\n\nconst encoding = `var fs = require(\"fs\");\nvar options = { encoding: \"utf-8\" };\n fs.readFile(\"myfile.txt\", options, function(err, data) {\n   if (err) {\n     console.error(\"Error reading file!\");\n     return;\n   }\n     console.log(data.match(/x/gi).length + \" letter X's\");\n });\n \nvar fs = require(\"fs\");\nvra options = { encoding: \"utf-8\" };\nfs.readFile(\"myfile.txt\", options, function(err, data) { // ...});\nconsole.log(\"Hello world!\");`.trim()\n\nconst encoding_2 = `var express = require(\"express\");\nvar http = require(\"http\");\nvar app = express();\n\napp.use((request, response, next) => {\n   console.log(\"In comes a \" + request.method + \" to \" + request.url);\n   next();});\n   \n   app.use((request, response) => {\n     response.writeHead(200, { \"Content-Type\": \"text/plain\" });\n     response.end(\"Hello, world!\");\n   });\n   \nhttp.createServer(app).listen(3000);`.trim()\n\nconst authentication = `app.use((request, response, next) => {\n  console.log(\"In comes a \" + request.method + \" to \" + request.url);\n  next();});\n  \n app.use((request, response, next) => {\n    var minute = (new Date()).getMinutes();\n        if ((minute % 2) === 0) {\n        next();\n      } \n        else {\n        response.statusCode = 403;\n        response.end(\"Not authorized.\");\n    }});\n    \n    app.use((request, response) => {\n    response.end('Secret info: the password is \"swordfish\"!');\n  });`.trim()\n\nconst logger = `\nvar express = require(\"express\");\nvar logger = require(\"morgan\");\nvar http = require(\"http\");\nvar app = express();\napp.use(logger(\"short\"));\n\napp.use((request, response) => {\n    response.writeHead(200, { \"Content-Type\": \"text/plain\" });\n    response.end(\"Hello, world!\");\n  });\n  \nhttp.createServer(app).listen(3000);\n\n\nEXPRESS S STATIC MIDDLEWARE\nvar express = require(\"express\");\nvar path = require(\"path\");\nvar http = require(\"http\");\nvar app = express();\nvar publicPath = path.resolve(__dirname, \"public\");\n\napp.use(express.static(publicPath));\n\napp.use((request, response) => {\n     response.writeHead(200, { \"Content-Type\": \"text/plain\" });\n     response.end(\"Looks like you didn't find a static file.\");\n  });\n  \nhttp.createServer(app).listen(3000);`.trim()\n\nconst userid = `value, you’ll look inside the params property of the request.\n  app.get(\"/users/:userid\", function(req, res) {\n  var userId = parseInt(req.params.userid, 10);\n   // ...\n   });`.trim()\n\nconst params = `app.get(/^\\/users\\/(\\d+)$/, function(req, res) {\n  var userId = parseInt(req.params[0], 10);\n  // ...\n  });\n `.trim()\n\nconst horribleRegexp = `var horribleRegexp = /^([0-9a-f]{8}-[0-9a-f]{4}-➥ 4[0-9a-f]{3}-[89ab][0-9af]{3}-[0-9a-f]{12})$/i;\n    app.get(horribleRegexp, function(req, res) {\n     var uuid = req.params[0];\n     // ...\n});\n`.trim()\n\nconst EVIL_IP = `var express = require(\"express\");\nvar app = express();\nvar EVIL_IP = \"123.45.67.89\";\n\napp.use((request, response, next) => {\n     if (request.ip === EVIL_IP) {\n     response.status(401).send(\"Not allowed!\");\n   } \n   else {\n     next();\n }});\n \n // ... the rest of your app ...\n`.trim()\n\nconst publicPath = `var publicPath = path.resolve(__dirname, \"public\");\nvar userUploadsPath = path.resolve(__dirname, \"user_uploads\");\napp.use(express.static(publicPath));\napp.use(express.static(userUploadsPath));\n`.trim()\n\nconst uploads = `app.use(\"/public\", express.static(publicPath));\napp.use(\"/uploads\", express.static(userUploadsPath));`.trim()\n\nconst staticFiles = `var express = require(\"express\");\nvar path = require(\"path\");\nvar http = require(\"http\");\nvar app = express();\n\n//Sets up the public path, using Node’s path module\nvar publicPath = path.resolve(__dirname, \"public\");\n\n//Sends static files from the publicPath directory\napp.use(express.static(publicPath));\n\napp.use((request, response) => {\n     response.writeHead(200, { \"Content-Type\": \"text/plain\" });\n     response.end(\"Looks like you didn't find a static file.\");\n   });\n   \nhttp.createServer(app).listen(4000);\n`.trim()\n\nconst scaffold = `var express = require('express');\nvar app = express();\n\napp.get('/', function (req, res) {\n   res.send('Welcome to JavaTpoint!');\n});\n\napp.listen(8000, function () {\n   console.log('Example app listening on port 8000!');\n}); `.trim()\n\nconst cookies = `\nvar express = require('express');\nvar cookieParser = require('cookie-parser');\nvar app = express();\n\napp.use(cookieParser());\napp.get('/cookieset', (req, res) => {\n   res.cookie('cookie_name', 'cookie_value');\n   res.cookie('company', 'javatpoint');\n   res.cookie('name', 'sonoo');\n   res.status(200).send('Cookie is set');\n});\n\napp.get('/cookieget', (req, res) => {\n   res.status(200).send(req.cookies);\n});\n\napp.get('/', (req, res) => {\n   res.status(200).send('Welcome to JavaTpoint!');\n});\n\n var server = app.listen(8000, () => {\n var host = server.address().address;\n var port = server.address().port;\n console.log('Example app listening at http://%s:%s', host, port);\n});`.trim()\n\n\nclass Middleware extends Component {\n  componentDidMount() {\n    setTimeout(() => Prism.highlightAll(), 0)\n  }\n  render() {\n    const { classes } = this.props;\n    return (\n      <Grid container>\n        <Grid item xs={2}>\n          <Paper className={classes.paper}>\n            <h4><Sidebar /></h4>\n          </Paper>\n        </Grid>\n        <Grid item xs={10}>\n          <Paper className={classes.paper}>\n            <List>\n              <h3>How Middleware works? Where Middleware fits in API?</h3>\n              <p>Middleware allows you to define a stack of actions that you should flow through. Express servers themselves\n                are a stack of middlewares.</p>\n              <div style={titles}>\n                <PrismCode\n                  code={middleware}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <br />\n              <i>A layer in the middleware stack is a function, which takes n parameters (req & res) and a next\n                function.\n                Middleware expects the layer to do some computation, augment the parameters and then call next.\n                A stack doesn't do anything unless you handle it. Express will handle the stack every time an\n                incoming HTTP request is caught on the server. With middleware you handle the stack manually.\n                // express, you need to do nothing middleware\n                stack.handle(someData);</i>\n              <br />\n              <br />\n              <h3>more complex example :</h3>\n              <div style={titles}>\n                <PrismCode\n                  code={middleware_2}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <i>In express terms you just define a stack of operations you want express to handle for every incoming\n                HTTP request.\n                In terms of express (rather than connect) you have global middleware and route specific\n                middleware. This means you can attach a middleware stack to every incoming HTTP requests or only\n                attach it to HTTP requests that interact with a certain route.\n              </i>\n              <br />\n              <br />\n              <h3>Advanced examples of express & middleware </h3>\n              <div style={titles}>\n                <PrismCode\n                  code={middleware_3}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <h3>What Express is used for</h3>\n              Express could be used to build any web application. It can process incoming requests and respond to\n              them\n              @ Middleware which is a way to break your app into smaller bits of behavior.Generally,\n              middleware is called one by one, in a sequence.\n              @Routing similarly breaks your app up into smaller functions that are executed when the\n              user visits a particular resource.\n              @Routers can further break up large applications into smaller, composable sub applications.\n              <br />\n              <br />\n              <div style={titles}>\n                <PrismCode\n                  code={Mustache}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <h3>The two most common external resources you’ll deal with in Express are</h3>\n               1.Anything involving the filesystem—Like reading and writing files from your harddrive<br />\n               2.Anything involving a network—Like receiving requests, sending responses, or sending\n              your own requests over the internet.\n              <div style={titles}>\n                <PrismCode\n                  code={encoding}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <br />\n              <br />\n              <h3>middleware</h3>\n              <div style={titles}>\n                <PrismCode\n                  code={encoding_2}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <br />\n              <br />\n              <h3>middleware can also change the request or response objects\n                Adding fake authentication middleware</h3>\n              <div style={titles}>\n                <PrismCode\n                  code={authentication}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <br />\n              <br />\n              <h3>Third-party middleware libraries\n                MORGAN LOGGING MIDDLEWARE</h3>\n              <div style={titles}>\n                <PrismCode\n                  code={logger}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <h3>Routing</h3>\n              Routing is a mapping of an HTTP verb (like GET or POST) and a URI (like/users/123).\n              Routing is a way to map requests to specific handlers depending on their URL and HTTP verb.\n              Simple and pattern-matching routing Using middleware with routing Serving static files with\n              express.static, Express’s built-in static file middleware Using Express with Node’s built-in HTTPS\n              module.\n              One of Express’s big features, allowing you to map different requests to different request handler.\n              The features of routing The simplest way to grab a parameter is by putting it in your route with\n              a colon infront of it. To grab the\n              <div style={titles}>\n                <PrismCode\n                  code={userid}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <p>Using regular expressions to match routes. This gives you more control over the routes you specify.\n                You can also use regular expressions to match parameters.\n                Let’s imagine that you want to match things like /users/123 or /users/456 but not/users/olivia. You\n                can code this into a regular expression and grab the number toboot.</p>\n              <div style={titles}>\n                <PrismCode\n                  code={params}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <i>This is one way to enforce the “the user ID must be an integer” constraint. it’s passed in as\n                a string, so you have to convert it to a number.</i>\n              <h3>@UUID-matching routes with a regexp</h3>\n              <div style={titles}>\n                <PrismCode\n                  code={horribleRegexp}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <i>Extending request and response</i>\n              Express augments the request and response objects that you’re passed in every request\n              handler.\n              One nicety Express offers is the redirect method.\n              <h3> Using redirect:</h3>\n              response.redirect(\"/hello/world\");\n              response.redirect(\"http://expressjs.com\");\n              <h3>sendFile</h3>\n              response.sendFile(\"/path/to/cool_song.mp3\");\n              <h3>Let’s use some of these things to build middleware that blocks an evil IP address.</h3>\n              <div style={titles}>\n                <PrismCode\n                  code={EVIL_IP}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <h3>Mounting static file middleware</h3>\n              var photoPath = path.resolve(__dirname, \"offensive-photos-folder\");\n              app.use(\"/offensive\", express.static(photoPath));\n              <h3>ROUTING WITH MULTIPLE STATIC FILE DIRECTORIES</h3>\n              I frequently find myself with static files in multiple directories. For example, I sometimes have static\n              files in a folder called public and another in a folder called user_uploads.How can you do this\n              with Express?\n              Express solves this problem with the built-in middleware feature, and becaus eexpress.static is\n              middleware, you can just apply it multiple times.\n              <div style={titles}>\n                <PrismCode\n                  code={publicPath}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <h3>.Now, let’s imagine four scenarios and see how this code deals with them</h3>\n              1.The user requests a resource that isn’t in the public folder or the user_uploads folder. Both static\n              middleware functions will continue on to the next routes and middleware.<br />\n              2.The user requests a resource that’s in the public folder. The first middleware will send the file and\n              no following routes or middleware functions will be called.<br />\n              3.The user requests a resource that’s in the user_uploads folder but not the public folder.The\n              first\n              middleware will continue on (it’s not in public), so the second middle-ware will pick it up. After that,\n              no other\n              middleware or route will be called.<br />\n              4.The user requests a resource that’s in both the public folder and the user_uploads folder.Because\n              the\n              public-serving middleware is first, users will get the file in public and users will never be able to\n              reach\n              the matching file in the user_uploads folder.\n              <h3>Serving static files from multiple directories without conflict</h3>\n              <div style={titles}>\n                <PrismCode\n                  code={uploads}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <h3>static Files</h3>\n              <div style={titles}>\n                <PrismCode\n                  code={staticFiles}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <h3>Scaffold</h3>\n              npm install express-scaffold\n              After this step, execute the following command to install express generator:\n              npm install -g express-generator\n              Now, you can use express to scaffold a web-app.\n              <br />\n              <div style={titles}>\n                <PrismCode\n                  code={scaffold}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n              <i>Open Node.js command prompt, go to myapp and run npm init command\n                Fill the entries and press enter.\n                It will create a package.json file in myapp folder and the data is shown in JSON format.</i>\n              <br />\n              <br />\n\n              <b>Cookies</b>\n              <div style={titles}>\n                <PrismCode\n                  code={cookies}\n                  language=\"js\"\n                  plugins={[\"line-numbers\"]}\n                />\n              </div>\n            </List>\n          </Paper>\n        </Grid>\n      </Grid>\n    )\n  }\n}\n\nexport default (withStyles(styles)(Middleware));\n"]},"metadata":{},"sourceType":"module"}