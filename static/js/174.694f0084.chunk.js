(this["webpackJsonpmern-stack-client"]=this["webpackJsonpmern-stack-client"]||[]).push([[174],{140:function(e,n,t){"use strict";t.d(n,"a",(function(){return m}));var a=t(45),s=t(28),r=t(136),o=t(137),c=t(139),l=t(0),i=t.n(l),u=t(138),p=t.n(u),m=(t(59),function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(r.a)(this,Object(o.a)(n).call(this,e))).highlight=function(){t.ref&&t.ref.current&&p.a.highlightElement(t.ref.current)},t.ref=i.a.createRef(),t}return Object(c.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){this.highlight()}},{key:"componentDidUpdate",value:function(){this.highlight()}},{key:"render",value:function(){var e=this.props,n=e.code,t=(e.plugins,e.language);return i.a.createElement("pre",{className:"code-prism"},i.a.createElement("code",{ref:this.ref,className:"language-".concat(t)},n.trim()))}}]),n}(i.a.Component))},141:function(e,n,t){},151:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var a=t(0),s=t.n(a),r=t(26),o=t(297),c=t(295),l=t(114),i=Object(l.a)((function(e){return{root:{display:"flex"},paper:{marginRight:e.spacing(2)},line:{textDecoration:"none"}}}));function u(){var e=i();return s.a.createElement("div",{className:e.root},s.a.createElement(c.a,null,s.a.createElement(o.a,null,s.a.createElement(r.b,{to:"/setUpFiles",className:e.line},"SetUp")),s.a.createElement(o.a,null,s.a.createElement(r.b,{to:"/javaScript",className:e.line},"JavaScript")),s.a.createElement(o.a,null,s.a.createElement(r.b,{to:"/reactCurdMern",className:e.line},"Mern React")),s.a.createElement(o.a,null,s.a.createElement(r.b,{to:"/4_reactCurdHooks",className:e.line},"Mern React Hooks")),s.a.createElement(o.a,null,s.a.createElement(r.b,{to:"/pagination",className:e.line},"Sea Sort Pagi Auth_Token")),s.a.createElement(o.a,null,s.a.createElement(r.b,{to:"/propsModel",className:e.line},"SS pagination-Captcha")),s.a.createElement(o.a,null,s.a.createElement(r.b,{to:"/imageGallery",className:e.line},"ImageGallery")),s.a.createElement(o.a,null,s.a.createElement(r.b,{to:"/stripes",className:e.line},"Stripes-Signin with gfb")),s.a.createElement(o.a,null,s.a.createElement(r.b,{to:"/paginationsMern",className:e.line},"Paginations-push_notifis")),s.a.createElement(o.a,null,s.a.createElement(r.b,{to:"/googleMap",className:e.line},"GoogleMap")),s.a.createElement(o.a,null,s.a.createElement(r.b,{to:"/videoChat",className:e.line},"VideoChat")),s.a.createElement(o.a,null,s.a.createElement(r.b,{to:"/qrSccaners",className:e.line},"QrCode-reCapcha")),s.a.createElement(o.a,null,s.a.createElement(r.b,{to:"/react_share",className:e.line},"Share-Stripe")),s.a.createElement(o.a,null,s.a.createElement(r.b,{to:"/socialSignUp",className:e.line},"SocialSignUp")),s.a.createElement(o.a,null,s.a.createElement(r.b,{to:"/mernSocial",className:e.line},"MernSocial"))),s.a.createElement("div",null))}},536:function(e,n,t){"use strict";t.r(n);var a=t(45),s=t(28),r=t(136),o=t(137),c=t(139),l=t(0),i=t.n(l),u=t(138),p=t.n(u),m=t(120),g=t(57),d=t(296),h=t(5),b=(t(141),t(151)),E=t(140),f={backgroundColor:"#F0F8FF",padding:"1px",fontSize:"16px"},y='\nconst postSchema = new Schema({\n  text: String,\n  title: String,\n});\n\nconst Post = mongoose.model("Post", postSchema);\nmodule.exports = Post\n\n\n//Controllers\nconst Post = require(\'./model.js\');\n\nrouter.post(\'/\',async (req,res) =>{\n  const posts = new Post({\n    text: req.body.text,\n    title: req.body.title\n  })\n      await posts.save()\n      res.status(201).send(posts)\n})\n\n\n//Routes\nrouter.get("/posts", async (req, res) => {\n  const sort = {}\n  \n  const PAGE_SIZE = 3;                                                           //data per page\n  const page = parseInt(req.query.page || "0");\n  const total = await Post.countDocuments({});\n  const posts = await Post.find({})\n\n    .limit(PAGE_SIZE)                                                            //data limit get from mongodb\n    .skip(PAGE_SIZE * page);\n    res.json({\n      totalPages: Math.ceil(total / PAGE_SIZE),\n      posts,\n    });\n  \n \n  if(req.query.sortBy){                                             //localhost:5000/posts?sortBy=createdAt:true\n    const str = req.query.sortBy.split(\':\')\n    sort[str[0]] = str[1] === \'desc\' ? -1:1\n    console.log(\'sort\',str)\n}\n});\n\n\nrouter.get("/search/:text", (req, res) => {\n  var regex = new RegExp(req.params.text,\'i\');\n  Post.find({name:regex}).then(result => {\n    res.status(200).json(result)\n  })\n})\n\nmodule.exports = router;\n\n\n\n//server.js\nconst morgan = require("morgan");\nconst cookieParser = require("cookie-parser");\n\nconst app = express();\napp.use(cookieParser());\napp.use(\n  cors({\n    origin: "http://localhost:3000",\n    credentials: true\n  })\n);\n\nif (!process.env.NODE_ENV === "test") {\n  app.use(morgan("dev"));\n}\n\napp.use(express.json());\n\napp.use("/users", require("./routes/users"));\n\nconst port = process.env.PORT || 5000\napp.listen(port, () => console.log(\'Server Listening on\'));\n'.trim(),v="\nfunction App() {\n  const [pageNumber, setPageNumber] = useState(0);\n  const [numberOfPages, setNumberOfPages] = useState(0);\n  const [posts, setPosts] = useState([]);\n\n  const pages = new Array(numberOfPages).fill(null).map((v, i) => i);\n\n  useEffect(() => {\n    fetch(http://localhost:5000/posts?page='$'{pageNumber})\n      .then((res) => res.json())\n      .then(({ totalPages, posts }) => {\n        setPosts(posts);\n        console.log('eeeee',posts)\n        setNumberOfPages(totalPages);\n      });\n  }, [pageNumber]);\n\n  const gotoPrevious = () => {\n    setPageNumber(Math.max(0, pageNumber - 1));\n  };\n\n  const gotoNext = () => {\n    setPageNumber(Math.min(numberOfPages - 1, pageNumber + 1));\n  };\n\n  return (\n    <div className=\"App\">\n      <h3>Page of {pageNumber + 1}</h3>\n\n      {posts.map((post) => (\n        <div key={post._id} className=\"post\">\n          <h4>{post.title}</h4>\n          <p>{post.text}</p>\n        </div>\n      ))}\n\n      <button onClick={gotoPrevious}>Previous</button>\n      {pages.map((pageIndex) => (\n        <button key={pageIndex} onClick={() => setPageNumber(pageIndex)}>\n          {pageIndex + 1}\n        </button>\n      ))}\n      <button onClick={gotoNext}>Next</button>\n    </div>\n  );\n}\n\nexport default App;\n".trim(),N="\nconst bodyParser = require('body-parser');\nconst fetch = require('node-fetch');\nconst { stringify } = require('querystring');\nconst app = express();\n\napp.use(express.json());\n\napp.get('/', (_, res) => res.sendFile(__dirname + '/index.html'));\n\napp.post('/subscribe', async (req, res) => {\n  if (!req.body.captcha)\n    return res.json({ success: false, msg: 'Please select captcha' });\n\n  const secretKey = '6LdpvDEUAAAAAHszsgB_nnal29BIKDsxwAqEbZzU';                                     // Secret key\n\n  // Verify URL\n  const query = stringify({\n    secret: secretKey,\n    response: req.body.captcha,\n    remoteip: req.connection.remoteAddress\n  });\n  const verifyURL = https://google.com/recaptcha/api/siteverify?'$'{query};\n\n  const body = await fetch(verifyURL).then(res => res.json());\n\n  if (body.success !== undefined && !body.success)\n    return res.json({ success: false, msg: 'Failed captcha verification' });\n\n  return res.json({ success: true, msg: 'Captcha passed' });\n});\n\napp.listen(3000, () => console.log('Server started on port 3000'));\n".trim(),P=function(e){function n(){return Object(a.a)(this,n),Object(r.a)(this,Object(o.a)(n).apply(this,arguments))}return Object(c.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){setTimeout((function(){return p.a.highlightAll()}),0)}},{key:"render",value:function(){var e=this.props.classes;return i.a.createElement(m.a,{container:!0},i.a.createElement(m.a,{item:!0,xs:2},i.a.createElement(g.a,{className:e.paper},i.a.createElement("h4",null,i.a.createElement(b.a,null)))),i.a.createElement(m.a,{item:!0,xs:10},i.a.createElement(g.a,{className:e.paper},i.a.createElement(d.a,null,i.a.createElement("h3",null,"1.Server Side Pagination"),i.a.createElement("b",null,"Server"),i.a.createElement("div",{style:f},i.a.createElement(E.a,{code:y,language:"js",plugins:["line-numbers"]})),i.a.createElement("br",null),i.a.createElement("h3",null,"Client"),i.a.createElement("div",{style:f},i.a.createElement(E.a,{code:v,language:"js",plugins:["line-numbers"]})),i.a.createElement("br",null),i.a.createElement("h3",null,"2. Captcha"),i.a.createElement("div",{style:f},i.a.createElement(E.a,{code:N,language:"js",plugins:["line-numbers"]}))))))}}]),n}(l.Component);n.default=Object(h.a)((function(e){return{paper:{margin:e.spacing(1),padding:e.spacing(1)},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"}}}))(P)}}]);
//# sourceMappingURL=174.694f0084.chunk.js.map