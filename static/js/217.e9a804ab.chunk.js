(this["webpackJsonpmern-stack-client"]=this["webpackJsonpmern-stack-client"]||[]).push([[217],{140:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(45),a=n(28),l=n(136),s=n(137),o=n(139),u=n(0),c=n.n(u),i=n(138),m=n.n(i),d=(n(59),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(s.a)(t).call(this,e))).highlight=function(){n.ref&&n.ref.current&&m.a.highlightElement(n.ref.current)},n.ref=c.a.createRef(),n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.highlight()}},{key:"componentDidUpdate",value:function(){this.highlight()}},{key:"render",value:function(){var e=this.props,t=e.code,n=(e.plugins,e.language);return c.a.createElement("pre",{className:"code-prism"},c.a.createElement("code",{ref:this.ref,className:"language-".concat(n)},t.trim()))}}]),t}(c.a.Component))},141:function(e,t,n){},149:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r),l=n(26),s=n(297),o=n(295),u=n(114),c=Object(u.a)((function(e){return{root:{display:"flex"},paper:{marginRight:e.spacing(2)},line:{textDecoration:"none"}}}));function i(){var e=c();return a.a.createElement("div",{className:e.root},a.a.createElement(o.a,null,a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/introNodejs",className:e.line},"Intro")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/ejsNode",className:e.line},"Basics")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/buffers",className:e.line},"Buffer")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/childs",className:e.line},"Child Process-fork()-exec()")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/tut_1",className:e.line},"Callback")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/filSystems",className:e.line},"File System")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/evtNode",className:e.line},"EvtEmter-Capture data")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/codes",className:e.line},"Codes")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/url_shortener",className:e.line},"Url_Shortener")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/stripe_payment",className:e.line},"stripe_payment")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/sendEmail",className:e.line},"sendEmail")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/search_pagination",className:e.line},"search_pagination")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/push_notifications",className:e.line},"push_notifications")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/nodetext",className:e.line},"nodetext")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/file_upload",className:e.line},"file_upload")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/e_acco_veri",className:e.line},"email_acco_veri")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/2fa_speakearst",className:e.line},"2fa_speakearst")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/authentications",className:e.line},"SignUp")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/serverSide",className:e.line},"Server Side")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/tut_2",className:e.line},"Geocode-Upload")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/tut_6",className:e.line},"Chat")),a.a.createElement(s.a,null,a.a.createElement(l.b,{to:"/udemy",className:e.line},"Udemy"))),a.a.createElement("div",null))}},380:function(e,t,n){"use strict";n.r(t);var r=n(45),a=n(28),l=n(136),s=n(137),o=n(139),u=n(0),c=n.n(u),i=n(138),m=n.n(i),d=n(120),E=n(57),p=n(296),g=n(5),b=(n(141),n(149)),h=n(140),f={backgroundColor:"#F0F8FF",padding:"1px",fontSize:"16px"},C="\nconst ProductSchema = new Schems({\n  name: { type: String, required: true },\n  price: { type: Number, required: true },\n  image: { type: String, required: true },\n});\n\nmodule.exports = mongoose.model('Product', ProductSchema);\n".trim(),q="\nconst Product = require('../models/Product');\nconst { StatusCodes } = require('http-status-codes');\n\nconst createProduct = async (req, res) => {\n  const product = await Product.create(req.body);\n  res.status(StatusCodes.CREATED).json({ product });\n};\nconst getAllProducts = async (req, res) => {\n  const products = await Product.find({});\n  res.status(StatusCodes.OK).json({ products });\n};\n\nmodule.exports = {\n  createProduct,\n  getAllProducts,\n};".trim(),j="\nconst path = require('path');\nconst { StatusCodes } = require('http-status-codes');\nconst CustomError = require('../errors');\nconst cloudinary = require('cloudinary').v2;\nconst fs = require('fs');\n\nconst uploadProductImageLocal = async (req, res) => {\n  if (!req.files) {\n    throw new CustomError.BadRequestError('No File Uploaded');\n  }\n  const productImage = req.files.image;\n  if (!productImage.mimetype.startsWith('image')) {\n    throw new CustomError.BadRequestError('Please Upload Image');\n  }\n  const maxSize = 1024 * 1024;\n  if (productImage.size > maxSize) {\n    throw new CustomError.BadRequestError('Please upload image smaller 1MB');\n  }\n  const imagePath = path.join(\n    __dirname,\n    '../public/uploads/' + '$'{productImage.name}'\n  );\n  await productImage.mv(imagePath);\n  return res\n    .status(StatusCodes.OK)\n    .json({ image: { src: '/uploads/'$'{productImage.name}' } });\n};\n\nconst uploadProductImage = async (req, res) => {\n  const result = await cloudinary.uploader.upload(\n    req.files.image.tempFilePath,\n    {\n      use_filename: true,\n      folder: 'file-upload',\n    }\n  );\n  fs.unlinkSync(req.files.image.tempFilePath);\n  return res.status(StatusCodes.OK).json({ image: { src: result.secure_url } });\n};\n\nmodule.exports = {\n  uploadProductImage,\n};\n".trim(),y="\nconst { createProduct,  getAllProducts } = require('../controllers/productController');\nconst { uploadProductImage } = require('../controllers/uploadsController');\n\nrouter.route('/').post(createProduct).get(getAllProducts);\nrouter.route('/uploads').post(uploadProductImage);\n\nmodule.exports = router;\n".trim(),v="\nconst User = require('../models/User')\nconst jwt = require('jsonwebtoken')\nconst { UnauthenticatedError } = require('../errors')\n\nconst auth = async (req, res, next) => {\n  // check header\n  const authHeader = req.headers.authorization\n  if (!authHeader || !authHeader.startsWith('Bearer')) {\n    throw new UnauthenticatedError('Authentication invalid')\n  }\n  const token = authHeader.split(' ')[1]\n\n  try {\n    const payload = jwt.verify(token, process.env.JWT_SECRET)\n    // attach the user to the job routes\n    req.user = { userId: payload.userId, name: payload.name }\n    next()\n  } catch (error) {\n    throw new UnauthenticatedError('Authentication invalid')\n  }\n}\n\nmodule.exports = auth\n".trim(),N="\nconst { StatusCodes } = require('http-status-codes')\nconst errorHandlerMiddleware = (err, req, res, next) => {\n  let customError = {\n    // set default\n    statusCode: err.statusCode || StatusCodes.INTERNAL_SERVER_ERROR,\n    msg: err.message || 'Something went wrong try again later',\n  }\n\n  if (err.name === 'ValidationError') {\n    customError.msg = Object.values(err.errors)\n      .map((item) => item.message)\n      .join(',')\n    customError.statusCode = 400\n  }\n  if (err.code && err.code === 11000) {\n    customError.msg = 'Duplicate value entered for '$'{Object.keys(\n      err.keyValue\n    )} field, please choose another value'\n    customError.statusCode = 400\n  }\n  if (err.name === 'CastError') {\n    customError.msg = 'No item found with id : '$'{err.value}'\n    customError.statusCode = 404\n  }\n\n  return res.status(customError.statusCode).json({ msg: customError.msg })\n}\n\nmodule.exports = errorHandlerMiddleware;\n".trim(),P="\nconst notFound = (req, res) => res.status(404).send('Route does not exist')\n\nmodule.exports = notFound;\n".trim(),_="\nconst { StatusCodes } = require('http-status-codes');\nconst CustomAPIError = require('./custom-api');\n\nclass BadRequestError extends CustomAPIError {\n  constructor(message) {\n    super(message);\n    this.statusCode = StatusCodes.BAD_REQUEST;\n  }\n}\n\nmodule.exports = BadRequestError;\n".trim(),x="\nclass CustomAPIError extends Error {\n  constructor(message) {\n    super(message)\n  }\n}\n\nmodule.exports = CustomAPIError;\n".trim(),S="\nconst { StatusCodes } = require('http-status-codes');\nconst CustomAPIError = require('./custom-api');\n\nclass NotFoundError extends CustomAPIError {\n  constructor(message) {\n    super(message);\n    this.statusCode = StatusCodes.NOT_FOUND;\n  }\n}\n\nmodule.exports = NotFoundError;\n".trim(),w="\nconst { StatusCodes } = require('http-status-codes');\nconst CustomAPIError = require('./custom-api');\n\nclass UnauthenticatedError extends CustomAPIError {\n  constructor(message) {\n    super(message);\n    this.statusCode = StatusCodes.UNAUTHORIZED;\n  }\n}\n\nmodule.exports = UnauthenticatedError;\n".trim(),I="\nconst CustomAPIError = require('./custom-api')\nconst UnauthenticatedError = require('./unauthenticated')\nconst NotFoundError = require('./not-found')\nconst BadRequestError = require('./bad-request')\n\nmodule.exports = {\n  CustomAPIError,\n  UnauthenticatedError,\n  NotFoundError,\n  BadRequestError,\n}\n".trim(),U="\nconst fileUpload = require('express-fileupload');\nconst cloudinary = require('cloudinary').v2;\nconst connectDB = require('./db/connect');\nconst productRouter = require('./routes/productRoutes');\nconst notFoundMiddleware = require('./middleware/not-found');\nconst errorHandlerMiddleware = require('./middleware/error-handler');\n\n\ncloudinary.config({\n  cloud_name: process.env.CLOUD_NAME,\n  api_key: process.env.CLOUD_API_KEY,\n  api_secret: process.env.CLOUD_API_SECRET,\n});\n\napp.use(express.static('./public'));\napp.use(fileUpload({ useTempFiles: true }));\n\napp.use('/api/v1/products', productRouter);\napp.use(notFoundMiddleware);\napp.use(errorHandlerMiddleware);\n".trim(),A=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){setTimeout((function(){return m.a.highlightAll()}),0)}},{key:"render",value:function(){var e=this.props.classes;return c.a.createElement(d.a,{container:!0},c.a.createElement(d.a,{item:!0,xs:2},c.a.createElement(E.a,{className:e.paper},c.a.createElement("h4",null,c.a.createElement(b.a,null)))),c.a.createElement(d.a,{item:!0,xs:10},c.a.createElement(E.a,{className:e.paper},c.a.createElement(p.a,null,c.a.createElement("h3",null,"File Upload"),c.a.createElement("b",null,"middleware/authentication.js"),c.a.createElement("div",{style:f},c.a.createElement(h.a,{code:v,language:"js",plugins:["line-numbers"]})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"middleware/error-handler.js"),c.a.createElement("div",{style:f},c.a.createElement(h.a,{code:N,language:"js",plugins:["line-numbers"]})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"middleware/not-found.js"),c.a.createElement("div",{style:f},c.a.createElement(h.a,{code:P,language:"js",plugins:["line-numbers"]})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"models/product.js"),c.a.createElement("div",{style:f},c.a.createElement(h.a,{code:C,language:"js",plugins:["line-numbers"]})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"controllers/productController.js"),c.a.createElement("div",{style:f},c.a.createElement(h.a,{code:q,language:"js",plugins:["line-numbers"]})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"controllers/uploadsController.js"),c.a.createElement("div",{style:f},c.a.createElement(h.a,{code:j,language:"js",plugins:["line-numbers"]})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"routes/productRoutes.js"),c.a.createElement("div",{style:f},c.a.createElement(h.a,{code:y,language:"js",plugins:["line-numbers"]})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"errors/bad-request.js"),c.a.createElement("div",{style:f},c.a.createElement(h.a,{code:_,language:"js",plugins:["line-numbers"]})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"errors/custom-api.js"),c.a.createElement("div",{style:f},c.a.createElement(h.a,{code:x,language:"js",plugins:["line-numbers"]})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"errors/not-found.js"),c.a.createElement("div",{style:f},c.a.createElement(h.a,{code:S,language:"js",plugins:["line-numbers"]})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"errors/unauthenticated.js"),c.a.createElement("div",{style:f},c.a.createElement(h.a,{code:w,language:"js",plugins:["line-numbers"]})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"index.js"),c.a.createElement("div",{style:f},c.a.createElement(h.a,{code:I,language:"js",plugins:["line-numbers"]})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("b",null,"server.js"),c.a.createElement("div",{style:f},c.a.createElement(h.a,{code:U,language:"js",plugins:["line-numbers"]}))))))}}]),t}(u.Component);t.default=Object(g.a)((function(e){return{paper:{margin:e.spacing(1),padding:e.spacing(1)},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"}}}))(A)}}]);
//# sourceMappingURL=217.e9a804ab.chunk.js.map