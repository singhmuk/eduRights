(this["webpackJsonpmern-stack-client"]=this["webpackJsonpmern-stack-client"]||[]).push([[209],{140:function(e,n,t){"use strict";t.d(n,"a",(function(){return p}));var r=t(45),s=t(28),a=t(136),l=t(137),o=t(139),i=t(0),c=t.n(i),u=t(138),m=t.n(u),p=(t(59),function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(a.a)(this,Object(l.a)(n).call(this,e))).highlight=function(){t.ref&&t.ref.current&&m.a.highlightElement(t.ref.current)},t.ref=c.a.createRef(),t}return Object(o.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){this.highlight()}},{key:"componentDidUpdate",value:function(){this.highlight()}},{key:"render",value:function(){var e=this.props,n=e.code,t=(e.plugins,e.language);return c.a.createElement("pre",{className:"code-prism"},c.a.createElement("code",{ref:this.ref,className:"language-".concat(t)},n.trim()))}}]),n}(c.a.Component))},141:function(e,n,t){},149:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var r=t(0),s=t.n(r),a=t(26),l=t(297),o=t(295),i=t(114),c=Object(i.a)((function(e){return{root:{display:"flex"},paper:{marginRight:e.spacing(2)},line:{textDecoration:"none"}}}));function u(){var e=c();return s.a.createElement("div",{className:e.root},s.a.createElement(o.a,null,s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/introNodejs",className:e.line},"Intro")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/ejsNode",className:e.line},"Basics")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/buffers",className:e.line},"Buffer")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/childs",className:e.line},"Child Process-fork()-exec()")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/tut_1",className:e.line},"Callback")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/filSystems",className:e.line},"File System")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/evtNode",className:e.line},"EvtEmter-Capture data")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/codes",className:e.line},"Codes")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/url_shortener",className:e.line},"Url_Shortener")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/stripe_payment",className:e.line},"stripe_payment")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/sendEmail",className:e.line},"sendEmail")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/search_pagination",className:e.line},"search_pagination")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/push_notifications",className:e.line},"push_notifications")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/nodetext",className:e.line},"nodetext")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/file_upload",className:e.line},"file_upload")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/e_acco_veri",className:e.line},"email_acco_veri")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/2fa_speakearst",className:e.line},"2fa_speakearst")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/authentications",className:e.line},"SignUp")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/serverSide",className:e.line},"Server Side")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/tut_2",className:e.line},"Geocode-Upload")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/tut_6",className:e.line},"Chat")),s.a.createElement(l.a,null,s.a.createElement(a.b,{to:"/udemy",className:e.line},"Udemy"))),s.a.createElement("div",null))}},373:function(e,n,t){"use strict";t.r(n);var r=t(45),s=t(28),a=t(136),l=t(137),o=t(139),i=t(0),c=t.n(i),u=t(138),m=t.n(u),p=t(120),d=t(57),f=t(296),g=t(5),h=(t(141),t(149)),b=t(140),E={backgroundColor:"#F0F8FF",padding:"1px",fontSize:"16px"},v='\nrequire(\'dotenv\').config()\nconst express = require(\'express\');\nconst bodyParser = require("body-parser");\nconst ejs = require("ejs");\nconst mongoose = require("mongoose");\nconst session = require(\'express-session\');\nconst passport = require(\'passport\');\nconst passportLocalMongoose = require(\'passport-local-mongoose\');\nconst findOrCreate = require(\'mongoose-findorcreate\');\nconst GoogleStrategy = require(\'passport-google-oauth20\').Strategy;\n\nconst app = express();\n\napp.use(express.static("public"));\napp.set("view engine", \'ejs\');\napp.use(bodyParser.urlencoded({\n  extended: true\n}));\n\napp.use(session({\n  secret: "Some Secret",\n  resave: false,\n  saveUninitialized: true\n}));\n\napp.use(passport.initialize());\napp.use(passport.session());\n\nmongoose.connect("mongodb://localhost:27017/credentials", {\n  useNewUrlParser: true\n});\nmongoose.set("useCreateIndex", true);\n\nconst userSchema = new mongoose.Schema({\n  email: String,\n  password: String,\n  googleId: String,\n  secret: String\n});\n\nuserSchema.plugin(passportLocalMongoose);\nuserSchema.plugin(findOrCreate);\n\nconst User = new mongoose.model("User", userSchema);\n\npassport.use(User.createStrategy());\n\n// From passport-local-mongoose\npassport.serializeUser(User.serializeUser());\npassport.deserializeUser(User.deserializeUser());\n\npassport.serializeUser(function (user, done) {\n  done(null, user.id);\n});\n\npassport.deserializeUser(function (id, done) {\n  User.findById(id, function (err, user) {\n    done(err, user);\n  });\n});\n\npassport.use(new GoogleStrategy({\n  clientID: process.env.CLIENT_ID,\n  clientSecret: process.env.CLIENT_SECRET,\n  callbackURL: "http://localhost:3000/auth/google/secrets",\n  userProfileURL: "https://www.googleapis.com/oauth2/v3/userinfo"\n},\n  function (accessToken, refreshToken, profile, cb) {\n\n    User.findOrCreate({\n      googleId: profile.id\n    }, function (err, user) {\n      return cb(err, user);\n    });\n  }\n));\n\napp.get("/", function (req, res) {\n  res.render(\'home\');\n});\n\napp.get(\'/auth/google\',\n  passport.authenticate(\'google\', {\n    scope: [\'profile\']\n  }));\n\napp.get(\'/auth/google/secrets\',\n  passport.authenticate(\'google\', {\n    failureRedirect: \'/login\'\n  }),\n  function (req, res) {\n    // Successful authentication, redirect home.\n    res.redirect(\'/secrets\');\n  });\n\napp.get("/secrets", function (req, res) {\n  User.find({ "secret": { $ne: null } }, function (err, foundUsers) {\n    if (err) {\n      console.log(err);\n    } else {\n      if (foundUsers) {\n        res.render("secrets", { usersWithSecrets: foundUsers });\n      }\n    }\n  });\n});\n\napp.get("/logout", function (req, res) {\n  req.logout();\n  res.redirect("/");\n});\n\napp.route("/submit")\n  .get(function (req, res) {\n    if (req.isAuthenticated()) {\n      res.render("submit");\n    } else {\n      res.redirect("/login");\n    }\n  }).post(function (req, res) {\n    const submittedSecret = req.body.secret\n\n    console.log(req.user.id);\n\n    User.findById(req.user.id, function (err, foundUser) {\n      if (err) {\n        console.log(err);\n      } else {\n        if (foundUser) {\n          foundUser.secret = submittedSecret;\n          foundUser.save(function () {\n            res.redirect("/secrets");\n          });\n        }\n      }\n    });\n  });\n\napp.route("/login")\n  .get(function (req, res) {\n    res.render(\'login\');\n  })\n  .post(function (req, res) {\n    const user = new User({\n      username: req.body.username,\n      password: req.body.password\n    });\n\n    req.login(user, function (err) {\n      if (err) {\n        console.log(err);\n      } else {\n        passport.authenticate("local")(req, res, function () {\n          res.redirect("/secrets");\n        })\n      }\n    })\n  });\n\napp.route("/register")\n  .get(function (req, res) {\n    res.render(\'register\');\n  })\n  .post(function (req, res) {\n\n    User.register({\n      username: req.body.username\n    }, req.body.password, function (err, user) {\n      if (err) {\n        console.log(err);\n        res.redirect("/register");\n      } else {\n        passport.authenticate("local")(req, res, function () {\n          res.redirect("/secrets");\n        });\n      }\n    })\n  });\n\napp.listen(3000, function () {\n  console.log("Server started on port 3000");\n})\n'.trim(),y='\n//views/home.ejs\n<%- include(\'partials/header\') %>\n\n\n<div class="jumbotron centered">\n  <div class="container">\n    <i class="fas fa-key fa-6x"></i>\n    <h1 class="display-3">Secrets</h1>\n    <p class="lead">Don\'t keep your secrets, share them anonymously!</p>\n    <hr>\n    <a class="btn btn-light btn-lg" href="/register" role="button">Register</a>\n    <a class="btn btn-dark btn-lg" href="/login" role="button">Login</a>\n\n  </div>\n</div>\n\n<%- include(\'partials/footer\') %>\n\n\n//views/login.ejs\n <form action="/login" method="POST">\n            <div class="form-group">\n              <label for="email">Email</label>\n              <input type="email" class="form-control" name="username">\n            </div>\n            <div class="form-group">\n              <label for="password">Password</label>\n              <input type="password" class="form-control" name="password">\n            </div>\n            <button type="submit" class="btn btn-dark">Login</button>\n          </form>\n\n          \n//views/register.ejs\n <form action="/register" method="POST">\n            <div class="form-group">\n              <label for="email">Email</label>\n              <input type="email" class="form-control" name="username">\n            </div>\n            <div class="form-group">\n              <label for="password">Password</label>\n              <input type="password" class="form-control" name="password">\n            </div>\n            <button type="submit" class="btn btn-dark">Register</button>\n          </form>\n\n          \n//views/secret.ejs\n<%- include(\'partials/header\') %>\n\n<div class="jumbotron text-center">\n  <div class="container">\n    <i class="fas fa-key fa-6x"></i>\n    <h1 class="display-3">You\'ve Discovered the Secret!</h1>\n\n    <% usersWithSecrets.forEach(function(user){ %>\n      <p class="secret-text"><%=user.secret%></p>\n    <% }); %>\n\n    <hr>\n    <a class="btn btn-light btn-lg" href="/logout" role="button">Log Out</a>\n    <a class="btn btn-dark btn-lg" href="/submit" role="button">Submit a Secret</a>\n  </div>\n</div>\n\n<%- include(\'partials/footer\') %>\n\n\n\n//views/submit.ejs\n<%- include(\'partials/header\') %>\n\n<div class="container">\n  <div class="jumbotron centered">\n    <i class="fas fa-key fa-6x"></i>\n    <h1 class="display-3">Secrets</h1>\n    <p class="secret-text">Don\'t keep your secrets, share them anonymously!</p>\n\n    <form action="/submit" method="POST">\n\n      <div class="form-group">\n        <input type="text" class="form-control text-center" name="secret" placeholder="What\'s your secret?">\n      </div>\n      <button type="submit" class="btn btn-dark">Submit</button>\n    </form>\n\n\n  </div>\n</div>\n<%- include(\'partials/footer\') %>\n'.trim(),S='\n//views/partials/header.ejs\n<head>\n  <meta charset="utf-8">\n  <title>Secrets</title>\n  <link rel="stylesheet" href="https://use.fontawesome.com/releases>\n  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com">\n  <link rel="stylesheet" href="css/bootstrap-social.css"\n  <link rel="stylesheet" href="css/styles.css">\n</head>\n<body>\n\n\n//views/partials/footer.ejs\n</body>\n</html>\n'.trim(),w=function(e){function n(){return Object(r.a)(this,n),Object(a.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(o.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){setTimeout((function(){return m.a.highlightAll()}),0)}},{key:"render",value:function(){var e=this.props.classes;return c.a.createElement(p.a,{container:!0},c.a.createElement(p.a,{item:!0,xs:2},c.a.createElement(d.a,{className:e.paper},c.a.createElement("h4",null,c.a.createElement(h.a,null)))),c.a.createElement(p.a,{item:!0,xs:10},c.a.createElement(d.a,{className:e.paper},c.a.createElement(f.a,null,c.a.createElement("h3",null,"Authentications"),"server.js",c.a.createElement("div",{style:E},c.a.createElement(b.a,{code:v,language:"js",plugins:["line-numbers"]})),c.a.createElement("br",null),c.a.createElement("h3",null,"views"),c.a.createElement("div",{style:E},c.a.createElement(b.a,{code:y,language:"js",plugins:["line-numbers"]})),c.a.createElement("br",null),c.a.createElement("h3",null,"/views/partials"),c.a.createElement("div",{style:E},c.a.createElement(b.a,{code:S,language:"js",plugins:["line-numbers"]}))))))}}]),n}(i.Component);n.default=Object(g.a)((function(e){return{paper:{margin:e.spacing(1),padding:e.spacing(1)},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"}}}))(w)}}]);
//# sourceMappingURL=209.579c0fe8.chunk.js.map