(this["webpackJsonpmern-stack-client"]=this["webpackJsonpmern-stack-client"]||[]).push([[229],{140:function(e,n,t){"use strict";t.d(n,"a",(function(){return d}));var a=t(45),l=t(28),r=t(136),s=t(137),c=t(139),i=t(0),o=t.n(i),u=t(138),m=t.n(u),d=(t(59),function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(r.a)(this,Object(s.a)(n).call(this,e))).highlight=function(){t.ref&&t.ref.current&&m.a.highlightElement(t.ref.current)},t.ref=o.a.createRef(),t}return Object(c.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){this.highlight()}},{key:"componentDidUpdate",value:function(){this.highlight()}},{key:"render",value:function(){var e=this.props,n=e.code,t=(e.plugins,e.language);return o.a.createElement("pre",{className:"code-prism"},o.a.createElement("code",{ref:this.ref,className:"language-".concat(t)},n.trim()))}}]),n}(o.a.Component))},141:function(e,n,t){},149:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var a=t(0),l=t.n(a),r=t(26),s=t(297),c=t(295),i=t(114),o=Object(i.a)((function(e){return{root:{display:"flex"},paper:{marginRight:e.spacing(2)},line:{textDecoration:"none"}}}));function u(){var e=o();return l.a.createElement("div",{className:e.root},l.a.createElement(c.a,null,l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/introNodejs",className:e.line},"Intro")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/ejsNode",className:e.line},"Basics")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/buffers",className:e.line},"Buffer")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/childs",className:e.line},"Child Process-fork()-exec()")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/tut_1",className:e.line},"Callback")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/filSystems",className:e.line},"File System")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/evtNode",className:e.line},"EvtEmter-Capture data")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/codes",className:e.line},"Codes")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/url_shortener",className:e.line},"Url_Shortener")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/stripe_payment",className:e.line},"stripe_payment")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/sendEmail",className:e.line},"sendEmail")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/search_pagination",className:e.line},"search_pagination")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/push_notifications",className:e.line},"push_notifications")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/nodetext",className:e.line},"nodetext")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/file_upload",className:e.line},"file_upload")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/e_acco_veri",className:e.line},"email_acco_veri")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/2fa_speakearst",className:e.line},"2fa_speakearst")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/authentications",className:e.line},"SignUp")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/serverSide",className:e.line},"Server Side")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/tut_2",className:e.line},"Geocode-Upload")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/tut_6",className:e.line},"Chat")),l.a.createElement(s.a,null,l.a.createElement(r.b,{to:"/udemy",className:e.line},"Udemy"))),l.a.createElement("div",null))}},374:function(e,n,t){"use strict";t.r(n);var a=t(45),l=t(28),r=t(136),s=t(137),c=t(139),i=t(0),o=t.n(i),u=t(138),m=t.n(u),d=t(120),E=t(57),p=t(296),g=t(5),b=(t(141),t(149)),h=t(140),f={backgroundColor:"#F0F8FF",padding:"1px",fontSize:"16px"},v="\nconst urlSchema = new Schems({\n  urlCode: String,\n  longUrl: String,\n  shortUrl: String,\n  date: { type: String, default: Date.now }\n});\n\nmodule.exports = mongoose.model('Url', urlSchema);\n".trim(),U="\nconst validUrl = require('valid-url');\nconst shortid = require('shortid');\nconst config = require('config');\nconst Url = require('../models/Url');\n\n\nrouter.post('/shorten', async (req, res) => {\n  const { longUrl } = req.body;\n  const baseUrl = config.get('baseUrl');\n\n  if (!validUrl.isUri(baseUrl)) {                           //Check base url\n    return res.status(401).json('Invalid base url');\n  }\n\n  const urlCode = shortid.generate();                       //Create url code\n  if (validUrl.isUri(longUrl)) {                            // Check long url\n    try {\n      let url = await Url.findOne({ longUrl });\n\n      if (url) {\n        res.json(url);\n      } else {\n        const shortUrl = baseUrl + '/' + urlCode;\n\n        url = new Url({\n          longUrl,\n          shortUrl,\n          urlCode,\n          date: new Date()\n        });\n\n        await url.save();\n\n        res.json(url);\n      }\n    } catch (err) {\n      console.error(err);\n      res.status(500).json('Server error');\n    }\n  } else {\n    res.status(401).json('Invalid long url');\n  }\n});".trim(),N="\nconst Url = require('../models/Url');\n\nrouter.get('/:code', async (req, res) => {\n  try {\n    const url = await Url.findOne({ urlCode: req.params.code });\n\n    if (url) {\n      return res.redirect(url.longUrl);\n    } else {\n      return res.status(404).json('No url found');\n    }\n  } catch (err) {\n    console.error(err);\n    res.status(500).json('Server error');\n  }\n});".trim(),j="\nconst connectDB = require('./config/db');\napp.use('/', require('./routes/index'));\napp.use('/api/url', require('./routes/url'))\n\n\n//postman\nPOST http://localhost:5000/api/url/shorten\n  {\n    \"longUrl\": \"https://www.amazon.com/dp/B075YBBQMM/ref=sspa_dk_detail_5?psc=\"\n  }\n".trim(),y=function(e){function n(){return Object(a.a)(this,n),Object(r.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(c.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){setTimeout((function(){return m.a.highlightAll()}),0)}},{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(d.a,{container:!0},o.a.createElement(d.a,{item:!0,xs:2},o.a.createElement(E.a,{className:e.paper},o.a.createElement("h4",null,o.a.createElement(b.a,null)))),o.a.createElement(d.a,{item:!0,xs:10},o.a.createElement(E.a,{className:e.paper},o.a.createElement(p.a,null,o.a.createElement("h3",null,"Url Shortener Service"),o.a.createElement("b",null,"models/url.js"),o.a.createElement("div",{style:f},o.a.createElement(h.a,{code:v,language:"js",plugins:["line-numbers"]})),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("b",null,"routes/url.js"),o.a.createElement("div",{style:f},o.a.createElement(h.a,{code:U,language:"js",plugins:["line-numbers"]})),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("b",null,"routes/index.js"),o.a.createElement("div",{style:f},o.a.createElement(h.a,{code:N,language:"js",plugins:["line-numbers"]})),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("b",null,"server.js"),o.a.createElement("div",{style:f},o.a.createElement(h.a,{code:j,language:"js",plugins:["line-numbers"]}))))))}}]),n}(i.Component);n.default=Object(g.a)((function(e){return{paper:{margin:e.spacing(1),padding:e.spacing(1)},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"}}}))(y)}}]);
//# sourceMappingURL=229.42661c98.chunk.js.map