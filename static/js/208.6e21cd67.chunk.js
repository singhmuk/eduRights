(this["webpackJsonpmern-stack-client"]=this["webpackJsonpmern-stack-client"]||[]).push([[208],{140:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var n=t(45),r=t(28),s=t(136),l=t(137),c=t(139),o=t(0),i=t.n(o),u=t(138),m=t.n(u),d=(t(59),function(e){function a(e){var t;return Object(n.a)(this,a),(t=Object(s.a)(this,Object(l.a)(a).call(this,e))).highlight=function(){t.ref&&t.ref.current&&m.a.highlightElement(t.ref.current)},t.ref=i.a.createRef(),t}return Object(c.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){this.highlight()}},{key:"componentDidUpdate",value:function(){this.highlight()}},{key:"render",value:function(){var e=this.props,a=e.code,t=(e.plugins,e.language);return i.a.createElement("pre",{className:"code-prism"},i.a.createElement("code",{ref:this.ref,className:"language-".concat(t)},a.trim()))}}]),a}(i.a.Component))},141:function(e,a,t){},149:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));var n=t(0),r=t.n(n),s=t(26),l=t(297),c=t(295),o=t(114),i=Object(o.a)((function(e){return{root:{display:"flex"},paper:{marginRight:e.spacing(2)},line:{textDecoration:"none"}}}));function u(){var e=i();return r.a.createElement("div",{className:e.root},r.a.createElement(c.a,null,r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/introNodejs",className:e.line},"Intro")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/ejsNode",className:e.line},"Basics")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/buffers",className:e.line},"Buffer")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/childs",className:e.line},"Child Process-fork()-exec()")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/tut_1",className:e.line},"Callback")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/filSystems",className:e.line},"File System")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/evtNode",className:e.line},"EvtEmter-Capture data")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/codes",className:e.line},"Codes")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/url_shortener",className:e.line},"Url_Shortener")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/stripe_payment",className:e.line},"stripe_payment")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/sendEmail",className:e.line},"sendEmail")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/search_pagination",className:e.line},"search_pagination")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/push_notifications",className:e.line},"push_notifications")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/nodetext",className:e.line},"nodetext")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/file_upload",className:e.line},"file_upload")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/e_acco_veri",className:e.line},"email_acco_veri")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/2fa_speakearst",className:e.line},"2fa_speakearst")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/authentications",className:e.line},"SignUp")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/serverSide",className:e.line},"Server Side")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/tut_2",className:e.line},"Geocode-Upload")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/tut_6",className:e.line},"Chat")),r.a.createElement(l.a,null,r.a.createElement(s.b,{to:"/udemy",className:e.line},"Udemy"))),r.a.createElement("div",null))}},382:function(e,a,t){"use strict";t.r(a);var n=t(45),r=t(28),s=t(136),l=t(137),c=t(139),o=t(0),i=t.n(o),u=t(138),m=t.n(u),d=t(120),p=t(57),b=t(296),E=t(5),f=(t(141),t(149)),h=t(140),g={backgroundColor:"#F0F8FF",padding:"1px",fontSize:"16px"},N='\n{"user":{"19aff1ae-35b2-407e-87bc-1b76b2ca54f7":{\n  "id":"19aff1ae-35b2-407e-87bc-1b76b2ca54f7",\n  "temp_secret":{"ascii":"[&JnaKh]&Wt9>6Z}Cc1]X$ZMDtIVMH2I",\n    "hex":"5b264a6e614b685d265774393e365a7d4363315d58245a4d447449564d483249",\n    "base32":"LMTEU3TBJNUF2JSXOQ4T4NS2PVBWGMK5LASFUTKEOREVMTKIGJEQ",\n    "otpauth_url":"otpauth://totp/SecretKey?secret=LMTEU3TBJNUF2JSXOQ4T4NS2PVBWGMK5LASFUTKEOREVMTKIGJEQ"}},\n    "96ae4a35-98a2-48ed-84dd-829c8e882117":{"id":"96ae4a35-98a2-48ed-84dd-829c8e882117",\n"temp_secret":{"ascii":"7(Jv}W/1i9}J6at0ci)y}m{*I9Xd5I{%",\n  "hex":"37284a767d572f3169397d4a36617430636929797d6d7b2a4939586435497b25",\n  "base32":"G4UEU5T5K4XTC2JZPVFDMYLUGBRWSKLZPVWXWKSJHFMGINKJPMSQ",\n  "otpauth_url":"otpauth://totp/SecretKey?secret=G4UEU5T5K4XTC2JZPVFDMYLUGBRWSKLZPVWXWKSJHFMGINKJPMSQ"}},\n  "93c92864-8297-40b6-8550-4e7d4666742d":{"id":"93c92864-8297-40b6-8550-4e7d4666742d",\n    "temp_secret":{"ascii":"OPCeDKax((p;q2Sm[Gny1p!nAChR86HE",\n      "hex":"4f504365444b61782828703b7132536d5b476e793170216e4143685238364845",\n      "base32":"J5IEGZKEJNQXQKBIOA5XCMSTNVNUO3TZGFYCC3SBINUFEOBWJBCQ",\n      "otpauth_url":"otpauth://totp/SecretKey?secret=J5IEGZKEJNQXQKBIOA5XCMSTNVNUO3TZGFYCC3SBINUFEOBWJBCQ"}},\n      "fa6f9da6-f9db-4caf-8e47-2f9309a11e6d":{"id":"fa6f9da6-f9db-4caf-8e47-2f9309a11e6d",\n        "temp_secret":{"ascii":"qhRSFJy.;}MM&csaA$5PcaFg}X)LNuoQ",\n          "hex":"71685253464a792e3b7d4d4d2663736141243550636146677d58294c4e756f51",\n          "base32":"OFUFEU2GJJ4S4O35JVGSMY3TMFASINKQMNQUMZ35LAUUYTTVN5IQ",\n          "otpauth_url":"otpauth://totp/SecretKey?secret=OFUFEU2GJJ4S4O35JVGSMY3TMFASINKQMNQUMZ35LAUUYTTVN5IQ"}\n          }\n        }\n      }'.trim(),y="\n\nconst express = require(\"express\");\nconst bodyParser = require('body-parser');\nconst JsonDB = require('node-json-db').JsonDB;\nconst Config = require('node-json-db/dist/lib/JsonDBConfig').Config;\nconst uuid = require(\"uuid\");\nconst speakeasy = require(\"speakeasy\");\nconst app = express();\n\n\nvar db = new JsonDB(new Config(\"myDataBase\", true, false, '/'));\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\n\napp.post(\"/api/register\", (req, res) => {\n  const id = uuid.v4();\n  try {\n    const path = '/user/'$'{id}';\n    const temp_secret = speakeasy.generateSecret();     // Create temporary secret until it verified\n    \n    db.push(path, { id, temp_secret });                 // Create user in the database\n    res.json({ id, secret: temp_secret.base32 })        // Send user id and base32 key to user\n  } catch(e) {\n    console.log(e);\n    res.status(500).json({ message: 'Error generating secret key'})\n  }\n})\n\napp.post(\"/api/verify\", (req,res) => {\n  const { userId, token } = req.body;\n  try {\n    const path = '/user/'$'{userId}';                       // Retrieve user from database\n    const user = db.getData(path);\n    console.log({ user })\n    const { base32: secret } = user.temp_secret;\n    const verified = speakeasy.totp.verify({\n      secret,\n      encoding: 'base32',\n      token\n    });\n    if (verified) {\n      db.push(path, { id: userId, secret: user.temp_secret });      // Update user data\n      res.json({ verified: true })\n    } else {\n      res.json({ verified: false})\n    }\n  } catch(error) {\n    console.error(error);\n    res.status(500).json({ message: 'Error retrieving user'})\n  };\n})\n\napp.post(\"/api/validate\", (req,res) => {\n  const { userId, token } = req.body;\n  try {\n    const path = '/user/'$'{userId}';                 // Retrieve user from database\n    const user = db.getData(path);\n    console.log({ user })\n    const { base32: secret } = user.secret;\n    const tokenValidates = speakeasy.totp.verify({  // Returns true if the token matches\n      secret,\n      encoding: 'base32',\n      token,\n      window: 1\n    });\n    if (tokenValidates) {\n      res.json({ validated: true })\n    } else {\n      res.json({ validated: false})\n    }\n  } catch(error) {\n    console.error(error);\n    res.status(500).json({ message: 'Error retrieving user'})\n  };\n})\n\nconst port = 5000;\n\napp.listen(port, () => console.log('App is running on PORT.'));".trim(),v='\nGET: localhost:5000/api\nPOST: localhost:5000/api/register\n\nPOST: localhost:5000/api/verify\n      {\n        "userid":"fa6f9da6-f9db-4caf-8e47-2f9309a11e6d",\n         "token":"132276"\n      }'.trim(),S=function(e){function a(){return Object(n.a)(this,a),Object(s.a)(this,Object(l.a)(a).apply(this,arguments))}return Object(c.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){setTimeout((function(){return m.a.highlightAll()}),0)}},{key:"render",value:function(){var e=this.props.classes;return i.a.createElement(d.a,{container:!0},i.a.createElement(d.a,{item:!0,xs:2},i.a.createElement(p.a,{className:e.paper},i.a.createElement("h4",null,i.a.createElement(f.a,null)))),i.a.createElement(d.a,{item:!0,xs:10},i.a.createElement(p.a,{className:e.paper},i.a.createElement(b.a,null,i.a.createElement("h3",null,"2fa-speakeasy-example-master"),i.a.createElement("b",null,"myDataBase.json"),i.a.createElement("div",{style:g},i.a.createElement(h.a,{code:N,language:"js",plugins:["line-numbers"]})),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("b",null,"server.js"),i.a.createElement("br",null),"The second argument is used to tell the DB to save after each push If you put false, you'll have to call the save() method.",i.a.createElement("br",null),"The third argument is to ask JsonDB to save the database in an human readable format. (default false) The last argument is the separator. By default it's slash (/).",i.a.createElement("div",{style:g},i.a.createElement(h.a,{code:y,language:"js",plugins:["line-numbers"]})),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("b",null,"notes"),i.a.createElement("div",{style:g},i.a.createElement(h.a,{code:v,language:"js",plugins:["line-numbers"]}))))))}}]),a}(o.Component);a.default=Object(E.a)((function(e){return{paper:{margin:e.spacing(1),padding:e.spacing(1)},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"}}}))(S)}}]);
//# sourceMappingURL=208.6e21cd67.chunk.js.map